<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gi·∫£ l·∫≠p Kh√°n gi·∫£</title>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <style>
      body {
        font-family: sans-serif;
        text-align: center;
        padding: 50px;
        background-color: #f0f2f5;
      }
      h1 {
        color: #333;
      }
      button {
        padding: 20px 40px;
        font-size: 24px;
        cursor: pointer;
        border: none;
        border-radius: 50px;
        transition: transform 0.1s;
      }
      #btnHeart {
        background-color: #ff4757;
        color: white;
        box-shadow: 0 4px 15px rgba(255, 71, 87, 0.4);
      }
      #btnHeart:active {
        transform: scale(0.9);
      }
      #log {
        margin-top: 20px;
        color: #666;
      }
    </style>
  </head>
  <body>
    <h1>üéÆ B·∫£ng ƒëi·ªÅu khi·ªÉn Kh√°n gi·∫£</h1>
    <p>B·∫•m n√∫t b√™n d∆∞·ªõi ƒë·ªÉ th·∫£ tim v√†o App</p>

    <button id="btnHeart" onclick="sendHeart()">‚ù§Ô∏è TH·∫¢ TIM NGAY</button>
    <br /><br />

    <div style="display: flex; justify-content: center; gap: 10px">
      <input
        type="text"
        id="msgInput"
        placeholder="Chat g√¨ ƒë√≥..."
        style="padding: 10px; width: 200px"
      />
      <button
        onclick="sendChat()"
        style="
          padding: 10px;
          font-size: 16px;
          background: #2ed573;
          color: white;
        "
      >
        G·ª≠i Chat
      </button>
    </div>

    <div id="log">ƒêang k·∫øt n·ªëi...</div>

    <script>
      // K·∫øt n·ªëi t·ªõi Server Node.js tr√™n m√°y t√≠nh (localhost)
      const socket = io("http://localhost:3000");
      const ROOM_ID = "mobile_test"; // Ph·∫£i tr√πng v·ªõi RoomID trong App React Native

      socket.on("connect", () => {
        document.getElementById("log").innerText = "‚úÖ ƒê√£ k·∫øt n·ªëi Server!";
        // Join v√†o ph√≤ng ngay khi k·∫øt n·ªëi
        socket.emit("join_room", ROOM_ID);
      });

      // H√†m th·∫£ tim
      function sendHeart() {
        console.log("ƒê√£ b·∫•m th·∫£ tim!");
        socket.emit("send_heart", ROOM_ID);
      }

      // H√†m chat
      function sendChat() {
        const msg = document.getElementById("msgInput").value;
        if (msg) {
          socket.emit("send_message", {
            roomID: ROOM_ID,
            user: "Web User",
            message: msg,
          });
          document.getElementById("msgInput").value = "";
        }
      }
    </script>
  </body>
</html>
